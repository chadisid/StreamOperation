#  The BUILD rules for libnice.
package(default_visibility = ["//visibility:public"])

cc_library(
  name = "libnice",
  hdrs = glob(["upstream/nice/*.h",
               "upstream/agent/agent.h",
               "upstream/config.h",
              ]),
  srcs = [
    "upstream/agent/address.h",
    "upstream/agent/address.c",
    "upstream/agent/debug.h",
    "upstream/agent/debug.c",
    "upstream/agent/candidate.h",
    "upstream/agent/candidate.c",
    "upstream/agent/component.h",
    "upstream/agent/component.c",
    "upstream/agent/agent-priv.h",
    "upstream/agent/agent.c",
    "upstream/agent/stream.h",
    "upstream/agent/stream.c",
    "upstream/agent/conncheck.h",
    "upstream/agent/conncheck.c",
    "upstream/agent/discovery.h",
    "upstream/agent/discovery.c",
    "upstream/agent/interfaces.h",
    "upstream/agent/interfaces.c",
    "upstream/agent/pseudotcp.h",
    "upstream/agent/pseudotcp.c",
    "upstream/agent/iostream.h",
    "upstream/agent/iostream.c",
    "upstream/agent/inputstream.h",
    "upstream/agent/inputstream.c",
    "upstream/agent/outputstream.h",
    "upstream/agent/outputstream.c",
    "upstream/stun/constants.h",
    "upstream/stun/stunagent.h",
    "upstream/stun/stunagent.c",
    "upstream/stun/stunmessage.h",
    "upstream/stun/stunmessage.c",
    "upstream/stun/stun5389.h",
    "upstream/stun/stun5389.c",
    "upstream/stun/stuncrc32.h",
    "upstream/stun/stuncrc32.c",
    "upstream/stun/sha1.h",
    "upstream/stun/sha1.c",
    "upstream/stun/md5.h",
    "upstream/stun/md5.c",
    "upstream/stun/rand.h",
    "upstream/stun/rand.c",
    "upstream/stun/stunhmac.h",
    "upstream/stun/stunhmac.c",
    "upstream/stun/utils.h",
    "upstream/stun/utils.c",
    "upstream/stun/debug.h",
    "upstream/stun/debug.c",
    "upstream/stun/usages/ice.h",
    "upstream/stun/usages/ice.c",
    "upstream/stun/usages/bind.h",
    "upstream/stun/usages/bind.c",
    "upstream/stun/usages/turn.h",
    "upstream/stun/usages/turn.c",
    "upstream/stun/usages/timer.h",
    "upstream/stun/usages/timer.c",
    "upstream/random/random.h",
    "upstream/random/random.c",
    "upstream/random/random-glib.h",
    "upstream/random/random-glib.c",
    "upstream/socket/socket.h",
    "upstream/socket/socket-priv.h",
    "upstream/socket/socket.c",
    "upstream/socket/udp-bsd.h",
    "upstream/socket/udp-bsd.c",
    "upstream/socket/tcp-bsd.h",
    "upstream/socket/tcp-bsd.c",
    "upstream/socket/tcp-active.h",
    "upstream/socket/tcp-active.c",
    "upstream/socket/tcp-passive.h",
    "upstream/socket/tcp-passive.c",
    "upstream/socket/pseudossl.h",
    "upstream/socket/pseudossl.c",
    "upstream/socket/socks5.h",
    "upstream/socket/socks5.c",
    "upstream/socket/http.h",
    "upstream/socket/http.c",
    "upstream/socket/udp-turn.h",
    "upstream/socket/udp-turn.c",
    "upstream/socket/udp-turn-over-tcp.h",
    "upstream/socket/udp-turn-over-tcp.c",
  ],
  deps = [
          "//third_party/glog"
         ],
  includes = [
    "upstream/agent",
    "upstream/socket",
    "upstream/stun",
    "upstream/random",
    "upstream",
  ],
  copts = [
         "-I/usr/include/glib-2.0",
         "-I/usr/lib/x86_64-linux-gnu/glib-2.0/include",
         ],
  linkopts = [
         "-lgobject-2.0 -lglib-2.0 -lgio-2.0"
         ],
  defines = ["HAVE_CONFIG_H"]
)
